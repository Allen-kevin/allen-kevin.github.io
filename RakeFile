require 'html-proofer'

def run_htmlproofer()
  options = { 
    assume_extension: true,
    :typhoeus => { :ssl_verifypeer => false },
    allow_hash_href: true,
    url_ignore: [/edit\/gh-pages/]
  }
  HTMLProofer.check_directory("./_site", options).run
end

task :test do
  sh "bundle exec jekyll build"
  run_htmlproofer()
end

task :testwithoutbuild do
  run_htmlproofer()
end