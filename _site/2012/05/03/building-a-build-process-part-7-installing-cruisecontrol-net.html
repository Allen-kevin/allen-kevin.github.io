<p><em>This is part of <a href="">a larger series</a> in building a proper build process. For more information and additional series links, check out the <a href="">introductory post</a>.</em></p>

<h3 id="adding-a-hdd-to-your-vm-for-ci-information">Adding a HDD to your VM for CI Information</h3>
<p>I find this makes it easier to keep your CI files separate, and it’s definitely a good practice in a production environment in my experience. Virtualization makes this easier as well because all the virtual hard drive files only take up as much space as they use. Definitely an upside to VMs.</p>

<p>To add a new HDD to the VM, do the following:</p>

<ul>
  <li>Power down your Windows Build Server VM if it’s on.  </li>
  <li>Open VirtualBox  </li>
  <li>Right-click on your BobTheBuilder machine and select <code>Settings…</code></li>
  <li>Click the <code>Storage</code> Section on the Left-hand side  </li>
  <li>Note the two icons next to the <code>SATA Controller</code> section. Click the one on the right (<code>Add Hard Disk</code>). The Hard disk wizard will open.  </li>
  <li>Click <code>Create New Disk</code></li>
  <li>Choose your Disk Format (I left it as the default, VDI)  </li>
  <li>Choose <code>Dynamically Sized</code>  </li>
  <li>Name the Disk. I usually follow the format of <code>[MachineName]_[DrivePurpose]</code>, so in this case I chose <code>BobTheBuilder_CIDrive</code>  </li>
  <li>Set the size of the drive. I left the default (25 GB)  </li>
  <li>Next screen is the summary. Click create to create the drive.  </li>
  <li>Start the VM again and login.</li>
</ul>

<p>Now we have a hard drive initialized, but we still need to format it before the OS can see it. To do this:</p>

<ul>
  <li>Click start and type <code>diskmgmt.msc</code> to bring up the disk management utility.  </li>
  <li>You’ll see a dialog box to ask you to initialize the disk.  </li>
  <li>Select MBR for the type of initialization and click OK.  </li>
  <li>Now, right-click on the <code>Disk 1</code> entry to the bottom (the disk should indicate that it has 25 GB of unallocated space) and select <code>New Simple Volume</code>, which will open a wizard.  </li>
  <li>The amount of space for the drive will default to 100%. This is what we want, so click next.  </li>
  <li>Assign the drive letter of your choice. The default was <code>E:</code> for me, so I left it. Henceforth in this tutorial series, I’ll be calling it <code>E:</code> so you may want to choose <code>E:</code> to make it easier to follow along.  </li>
  <li>On the next screen, choose to format the volume as NTFS and give it the volume label of <code>CI</code>.  </li>
  <li>Click <code>Finish</code> to complete the process.After a few seconds, you should see the E: drive appear in your drives list. Open Windows Explorer and verify that it exists there, too.</li>
</ul>

<h3 id="creating-a-home-for-our-ci-files">Creating a Home for Our CI Files</h3>
<p>Now that we have a drive, it makes sense to create our directory structure.</p>

<p>On the E: drive, create the following directory structure:</p>

<p><code>
TestProject\
    CIArtifacts\
    WorkingDirectory\
</code></p>

<p><code>CIArtifacts</code> will store the output of our CI (logs, etc.); <code>WorkingDirectory</code> will be where we eventually check out the source code to automatically in order to act upon it.</p>

<h3 id="downloading-the-cruisecontrolnet-binaries">Downloading the CruiseControl.NET Binaries</h3>
<ul>
  <li>On the build server, head to the <a href="http://sourceforge.net/projects/ccnet/files/CruiseControl.NET%20Releases/">CruiseControl.NET Releases Page on SourceForge</a></li>
  <li>Click the newest release version (1.6 as of the time of this writing)</li>
  <li>Download the CruiseControl.NET executable and the CCTray executable.</li>
</ul>

<h3 id="installing-cruisecontrol-net">Installing CruiseControl .NET</h3>
<ul>
  <li>Run the CruiseControl.NET Setup executable as an administrator by right-clicking and selecting “Run as Administrator”. </li>
  <li>Agree to the license agreement.</li>
  <li>All options are selected by default; leave them and continue.</li>
  <li>Leave both checkmarks checked to install the CruiseControl .NET dashboard and to install CCNet as a service.</li>
  <li>Leave the default installation directory or customize to your preference (I left the default for this setup)</li>
  <li>Leave the default value for the Program Files folder group and click <code>Next</code>. CruiseControl.NET will commence installation.</li>
  <li>Click <code>Finish</code> and exit the wizard.</li>
</ul>

<h3 id="installing-cctray">Installing CCTray</h3>
<p>CCTray allows you to connect to one or more CruiseControl.NET projects and will keep you informed on their status.</p>

<p>You’ll want to repeat this process on the Build Server itself and on any desktops you’d like to see the status of the build on (for example, I have CCTray installed on my laptop’s desktop so I can quickly see if a build is broken).</p>

<p>To install CCTray, perform the following (don’t worry, we’ll configure it later):</p>

<ul>
  <li>Run the CCTray setup file and click <code>Next</code> at the introduction.</li>
  <li>Agree to the license agreement.</li>
  <li>Leave all three options selected and click next.</li>
  <li>Click <code>next</code> through the installation location and start menu group name screens. The application will install.</li>
  <li>Click <code>next</code>, and then click <code>Finish</code>, leaving the checkbox selected to start the program.</li>
</ul>

<p>Now CCTray is started (though not configured yet.)</p>

<h3 id="install--start-the-ccnet-dashboard-in-iis">Install / Start the CCNet Dashboard in IIS</h3>
<ul>
  <li><code>Click Start &gt; Administrative Tools &gt; IIS Manager</code></li>
  <li>
    <p>Expand the tree on the left-hand side to <code>[Server Name] &gt; Sites &gt; Default Web Site</code>.If you don’t see a directory under <code>Default Web Site</code> called <code>ccnet</code>, perform the following steps (otherwise, skip to after this bulleted list):</p>
  </li>
  <li>Right-click on Default Web Site and select <code>Add Virtual Directory…</code></li>
  <li>Give <code>ccnet</code> as the alias</li>
  <li>For the path, choose <code>[CCNet Install Directory]\webdashboard</code>. (e.g. for me, it was <code>C:\Program Files (x86)\CruiseControl.NET\webdashboard</code>)</li>
  <li>Click <code>OK</code>. The Virtual Directory will appear.</li>
  <li>Right-click the ccnet Virtual directory and choose <code>Convert to Application</code>.</li>
  <li>Click <code>OK</code> in the dialog box that appears.Now your ccnet virtual directory is set up. </li>
</ul>

<p>Keep going:</p>

<ul>
  <li>Click on <code>Default Web Site</code></li>
  <li>On the right-hand side Action menu, click <code>Start</code> to start the default web site (if it’s not already started).</li>
  <li>Open a web browser on the build server and navigate to http://localhost/ccnet</li>
</ul>

<p>If a web site shows up at all, you’re good to go. Don’t worry about any errors within the web dashboard application, as we’ll be configuring CCNet later.</p>

<h3 id="feedback-welcome">Feedback Welcome!</h3>
<p>I’d love to hear any comments on this series. Find it useful? Think there’s a better way to implement the technique or something I should have mentioned? Please drop a line in the comments to help me improve the series!</p>

<h3 id="references">References</h3>
<ul>
  <li><a href="http://www.cruisecontrolnet.org/">CruiseControl.NET Home Page</a></li>
  <li><a href="http://sourceforge.net/projects/ccnet/files/CruiseControl.NET%20Releases/">CruiseControl.NET Releases</a></li>
  <li><a href="http://www.matthewbussa.com/2011/05/installing-and-configuring-cruise.html">Installing and Configuring CruiseControl.NET</a> [via <a href="http://www.matthewbussa.com/">Mathewbussa.com</a>]</li>
</ul>

<table>
<tr>
<td><div align="left"><a href="http://skwordpresstoghost.azurewebsites.net/?p=511">&larr; Part 6b: MSBuild Integration With Cassini and Visual Studio</a></div></td>
<td><div align="right"><a href="http://skwordpresstoghost.azurewebsites.net/?p=491">Part 8: CruiseControl.NET Preparation &rarr;</a></div></td>
</tr>
</table>

